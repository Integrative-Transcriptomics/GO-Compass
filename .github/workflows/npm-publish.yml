# This workflow will run tests using node and then publish a package to GitHub Packages when a release is created
# For more information see: https://help.github.com/actions/language-and-framework-guides/publishing-nodejs-packages

name: Node.js Package

on:
  release:
    types: [created]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: 12
      - run: npm build
      - run: npm test

  rsync-deployment:
    needs: build
    runs-on: ubuntu-latest
    steps:
    - name: ssh deploy
  # You may pin to the exact commit or the version.
  # uses: easingthemes/ssh-deploy@9ab39935552e9fe6706e9c9bf2a70a3328a4a5e6
      uses: easingthemes/ssh-deploy@v2
      with:
      # Private Key
      SSH_PRIVATE_KEY: 
      # Remote host
      REMOTE_HOST: 
      # Remote user
      REMOTE_USER: 
      # Remote port
      REMOTE_PORT: # optional, default is 22
      # Source directory
      SOURCE: # optional, default is 
      # Target directory
      TARGET: # optional, default is /home/REMOTE_USER/
      # Arguments to pass to rsync
      ARGS: # optional, default is -rltgoDzvO
      # An array of folder to exclude
      EXCLUDE: # optional, default is 
